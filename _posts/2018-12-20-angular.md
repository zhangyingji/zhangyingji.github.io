---
layout:     post
title:      "Angular"
subtitle:   "笔记"
date:       2018-12-20 20:09:00
author:     "zhangyingji"
header-img: "img/post-bg-2015.jpg"
catalog: true
tags:
    - JavaScript
---

## 前言

之前cesium项目用vue,但加载大数据的时候有问题,所以转用angular。看官方文档稍稍记录一下。

参考来源：
1. https://angular.cn

## 基础

```
# 安装angular-cli
npm install -g @angular/cli

# 新建项目
ng new 
# 若想用Less
ng new hello-ng --style less
cd hello-ng
# 启动
ng serve --open

# 创建组件
ng generate component hello

# tslint检查
ng lint

# 单元测试
ng test
# 端到端测试
ng e2e

# 构建
ng build
```

已有项目使用less

修改`*.css`文件及引用处后缀名为`less`并在`angular.json`文件中设置以下内容

```
  "schematics": {
    "@schematics/angular:component": {
      "styleext": "less"
    }
  }
```

---

双向绑定[()]

首先导入FormsModule: 打开 AppModule (app.module.ts) 并从 @angular/forms 库中导入 FormsModule 符号

```
import { FormsModule } from '@angular/forms';

imports: [
  FormsModule
],
```

```
<div>
    <label>name:
        <input [(ngModel)]="hero.name" placeholder="name">
    </label>
</div>
```

循环 *ngFor

```
<li *ngFor="let hero of heroes">
```

是否 *ngif

```
<div *ngIf="selectedHero">
```

事件绑定 (事件)

```
<li *ngfor="let hero of heros" (click)="onSelect(hero)">
```

单向属性绑定 [属性]

```
<app-hero-detail [hero]="selectedHero"></app-hero-detail>
```

---

服务

```
ng g service hero

// 注入服务
import { HeroService } from '../hero.service';

constructor(private heroService: HeroService) { }
```

---

路由

添加 AppRoutingModule

```
ng generate module app-routing --flat --module=app

// app-routing-module.ts
import { NgModule } from '@angular/core';
import { RouterModule, Routes } from '@angular/router';

@NgModule({
  exports: [ RouterModule ]
})
export class AppRoutingModule {}
```

添加路由定义

```
import { HeroesComponent }      from './heroes/heroes.component';

const routes: Routes = [
  { path: '', redirectTo: '/dashboard', pathMatch: 'full'},
  { path: 'heroes', component: HeroesComponent }
];
```

初始化，监听

```
@NgModule({
  imports: [ RouterModule.forRoot(routes) ]
}
```

添加路由出口

```
// app.component.ts
<router-outlet></router-outlet>
```

添加路由链接

```
<nav>
  <a routerLink="/heroes">Heroes</a>
</nav>
```

---

HTTP

```
// app.module.ts 启用HTTP
import { HttpClientModule } from '@angular/common/http';

// get
constructor(http: HttpClient) {
  http.get('/user/1').subscribe((user) => {
    console.log(user);
  });
}

// post
```

## 核心

### 架构


